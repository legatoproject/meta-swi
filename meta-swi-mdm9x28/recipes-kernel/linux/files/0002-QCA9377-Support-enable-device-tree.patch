From 34ca83dac611ec8c7fbd6240d2eaf56841ecec7e Mon Sep 17 00:00:00 2001
From: Chris Chan-Henry <cchenry@sierrawireless.com>
Date: Tue, 29 Aug 2017 15:04:38 -0700
Subject: [PATCH] ALPC-418: Added GPIO expander support     - Added to device
 tree     - Added driver support

Change-Id: I9c803fa1cfccffd8b3500999d4c7f1e8a279c2fb
---
 arch/arm/boot/dts/qcom/mdm9607-fx30.dtsi   | 25 +++++++++++++++
 arch/arm/boot/dts/qcom/mdm9607-wp76xx.dtsi |  1 +
 arch/arm/mach-msm/include/mach/swimcu.h    |  4 +++
 3 files changed, 79 insertions(+), 2 deletions(-)
 create mode 100644 arch/arm/boot/dts/qcom/mdm9607-fx30.dtsi

diff --git a/arch/arm/boot/dts/qcom/mdm9607-wp76xx.dtsi b/arch/arm/boot/dts/qcom/mdm9607-wp76xx.dtsi
index 8dd6d22..609067c 100755
--- a/arch/arm/boot/dts/qcom/mdm9607-wp76xx.dtsi
+++ b/arch/arm/boot/dts/qcom/mdm9607-wp76xx.dtsi
@@ -22,6 +22,7 @@
		serial0 = &blsp1_uart2_ls;
		serial1 = &blsp1_uart1;
		uart0 = &blsp1_uart2;
+		uart1 = &blsp1_uart3;
	};
 };

@@ -253,6 +254,10 @@
	status = "ok";
 };
 
+&blsp1_uart3 {
+       status = "ok";
+};
+
 &blsp1_uart2_ls {
 	status = "ok";
	pinctrl-names = "default";
diff --git a/arch/arm/boot/dts/qcom/mdm9607.dtsi b/arch/arm/boot/dts/qcom/mdm9607.dtsi
index 3074b63..3045442 100644
--- a/arch/arm/boot/dts/qcom/mdm9607.dtsi
+++ b/arch/arm/boot/dts/qcom/mdm9607.dtsi
@@ -100,6 +100,19 @@
 #include "mdm9607-coresight.dtsi"
 #include "mdm9607-pm.dtsi"

+/ {
+        bluetooth: bt_qca6174 {
+                compatible = "qca,qca6174";
+                qca,bt-reset-gpio = <&pm8019_gpios 2 0>;
+                qca,bt-vdd-pa-supply = <&rome_vreg>;
+                qca,bt-vdd-io-supply = <&mdm9607_l11>;
+                qca,bt-vdd-xtal-supply = <&mdm9607_l2>;
+                qca,bt-vdd-io-voltage-level = <1800000 1800000>;
+                qca,bt-vdd-xtal-voltage-level = <1800000 1800000>;
+        };
+};
+
+
 &soc {
	#address-cells = <1>;
	#size-cells = <1>;
@@ -572,7 +585,7 @@
	qcom,msm-bus,vectors-KBps =
				<86 512 0 0>,
				<86 512 500 800>;
-		status = "disabled";
+               status = "ok";
	};

	qcom,cnss-sdio {
